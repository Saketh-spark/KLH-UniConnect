# Faculty Chat Module - Architecture & Data Flow

## ğŸ—ï¸ System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT BROWSER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  React Application                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚         FacultyChat.jsx Component               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Chat List     â”‚  â”‚  Message Window        â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Users       â”‚  â”‚  - Messages (RTL/LTR) â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Groups      â”‚  â”‚  - Status indicators  â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Unread (2)  â”‚  â”‚  - âœ“ âœ“âœ“ âœ“âœ“ blue      â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Online â—    â”‚  â”‚  - Delete options     â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                â”‚  â”‚                        â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚ Search Bar       â”‚ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚ [Type email...] â“˜â”‚ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚                        â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚ Message Input    â”‚ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚ [Type here...] â–¶ï¸â”‚ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚   [+] [ğŸ˜Š]      â”‚ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚         Service Layer (JavaScript)                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ socketService.jsâ”‚  â”‚   chatAPI.js             â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                 â”‚  â”‚                          â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ connect()     â”‚  â”‚ â€¢ searchUsers()         â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ sendMessage() â”‚  â”‚ â€¢ getOrCreateChat()    â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ onMessage()   â”‚  â”‚ â€¢ getChatList()        â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ markSeen()    â”‚  â”‚ â€¢ getMessages()        â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ typing()      â”‚  â”‚ â€¢ sendMessage()        â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ deleteMsg()   â”‚  â”‚ â€¢ uploadFile()         â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ setStatus()   â”‚  â”‚ â€¢ createGroup()        â”‚â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚                  â†“â†‘ (WebSocket + HTTP)                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚ WebSocket  â”‚            â”‚ HTTP REST    â”‚
         â”‚ (Primary)  â”‚            â”‚ (Fallback)   â”‚
         â”‚ Port 8085  â”‚            â”‚ Port 8085    â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NETWORK LAYER                              â”‚
â”‚                   (Firewall / Proxy)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BACKEND SERVER (Spring Boot)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Socket.IO Server (Port 8085)                 â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  SocketIOEventListener.java                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  Event Handlers:                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ onConnect() - Track user connections        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ onDisconnect() - Clean up on exit           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ onSendMessage() - Broadcast message         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ onTyping() - Send typing indicator          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ onMessageSeen() - Read receipt              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ onUserStatus() - Track presence             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ onDeleteMessage() - Delete broadcast        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Connected Users Map:                                     â”‚  â”‚
â”‚  â”‚  {                                                         â”‚  â”‚
â”‚  â”‚    "faculty@email.com": SocketIOClient(id: socket-1),    â”‚  â”‚
â”‚  â”‚    "student1@email.com": SocketIOClient(id: socket-2),   â”‚  â”‚
â”‚  â”‚    "student2@email.com": SocketIOClient(id: socket-3)    â”‚  â”‚
â”‚  â”‚  }                                                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        REST Controller Layer (Port 8085)                 â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  ChatController.java                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET    /api/chat/users/search?email=...       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  POST   /api/chat/conversations                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET    /api/chat/conversations/{userId}       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET    /api/chat/conversations/{id}/messages  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  POST   /api/chat/messages                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  PUT    /api/chat/messages/{id}/seen            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  DELETE /api/chat/messages/{id}                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  POST   /api/chat/upload                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  POST   /api/chat/groups                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        Service Layer (Business Logic)                    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  ChatService.java                                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ searchUsers(email)                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ getOrCreateConversation(userId1, userId2)   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ getUserConversations(userId)                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ getConversationMessages(conversationId)     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ sendMessage(...)                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ markMessageAsRead(messageId)                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ deleteMessage(messageId, deleteForAll)      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ uploadFile(file)                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        Repository Layer (Data Access)                    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ MessageRepository                                      â”‚  â”‚
â”‚  â”‚  â€¢ ConversationRepository                                â”‚  â”‚
â”‚  â”‚  â€¢ ChatGroupRepository                                    â”‚  â”‚
â”‚  â”‚  â€¢ StudentRepository                                      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MONGODB ATLAS (Cloud)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Collections:                                                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ messages                                                  â”‚
â”‚  â”‚  â”œâ”€ _id: ObjectId                                         â”‚
â”‚  â”‚  â”œâ”€ conversationId: String                                â”‚
â”‚  â”‚  â”œâ”€ senderId: String                                      â”‚
â”‚  â”‚  â”œâ”€ content: String                                       â”‚
â”‚  â”‚  â”œâ”€ type: String (text/image/file/emoji)                 â”‚
â”‚  â”‚  â”œâ”€ timestamp: DateTime                                   â”‚
â”‚  â”‚  â”œâ”€ read: Boolean                                         â”‚
â”‚  â”‚  â””â”€ fileUrl: String (optional)                           â”‚
â”‚  â”‚                                                             â”‚
â”‚  â”Œâ”€ conversations                                             â”‚
â”‚  â”‚  â”œâ”€ _id: ObjectId                                         â”‚
â”‚  â”‚  â”œâ”€ participantIds: [String, String]                     â”‚
â”‚  â”‚  â”œâ”€ lastMessage: String                                   â”‚
â”‚  â”‚  â”œâ”€ lastMessageTime: DateTime                            â”‚
â”‚  â”‚  â””â”€ updatedAt: DateTime                                   â”‚
â”‚  â”‚                                                             â”‚
â”‚  â”Œâ”€ chatGroups                                                â”‚
â”‚  â”‚  â”œâ”€ _id: ObjectId                                         â”‚
â”‚  â”‚  â”œâ”€ groupName: String                                     â”‚
â”‚  â”‚  â”œâ”€ memberIds: [String]                                   â”‚
â”‚  â”‚  â”œâ”€ creatorId: String                                     â”‚
â”‚  â”‚  â””â”€ createdAt: DateTime                                   â”‚
â”‚  â”‚                                                             â”‚
â”‚  â”Œâ”€ students                                                  â”‚
â”‚  â”‚  â”œâ”€ _id: ObjectId                                         â”‚
â”‚  â”‚  â”œâ”€ email: String                                         â”‚
â”‚  â”‚  â”œâ”€ name: String                                          â”‚
â”‚  â”‚  â””â”€ role: String                                          â”‚
â”‚  â”‚                                                             â”‚
â”‚  Storage:                                                      â”‚
â”‚  â””â”€ /uploads/chat/ (File attachments)                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Message Flow Diagram

### Sending a Message

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User       â”‚
â”‚   Types:     â”‚
â”‚   "Hello"    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FacultyChat Component            â”‚
â”‚ - Optimistic UI Update           â”‚
â”‚ - Add to messages state          â”‚
â”‚ - Update chat timestamp          â”‚
â”‚ - Status: "sent" (âœ“)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ socketService.sendMessage()      â”‚
â”‚ - Create message object          â”‚
â”‚ - Check connection               â”‚
â”‚ - Emit via Socket.IO             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Socket.IO Client (WebSocket)     â”‚
â”‚ - Open persistent connection     â”‚
â”‚ - Send to backend                â”‚
â”‚ - Expect acknowledgement         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Socket.IO Server         â”‚
â”‚ onSendMessage() handler          â”‚
â”‚ - Extract message data           â”‚
â”‚ - Validate sender/receiver       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatService.sendMessage()        â”‚
â”‚ - Create Message entity          â”‚
â”‚ - Save to MongoDB                â”‚
â”‚ - Update Conversation            â”‚
â”‚ - Return saved message           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                 â”‚
       â–¼                                 â–¼
   [Backend]                        [Frontend]
   â”‚                                 â”‚
   â”œâ”€ Emit "message-delivered"      â”‚
   â”‚   to Sender socket             â”‚
   â”‚   Status: âœ“âœ“                   â”‚
   â”‚                                 â”‚
   â”œâ”€ Broadcast "receive-message"   â”‚
   â”‚   to Receiver socket            â”‚
   â”‚   (if online)                   â”‚
   â”‚                                 â”‚
   â”‚                                 â”œâ”€ Update: msg.status = "delivered"
   â”‚                                 â”‚
   â”‚                                 â”œâ”€ Listener: on('messageReceived')
   â”‚                                 â”‚   - Add message to chat
   â”‚                                 â”‚   - Auto-mark as seen
   â”‚                                 â”‚
   â”‚                                 â”œâ”€ Send "message-seen" event
   â”‚                                 â”‚   (after 300ms)
   â”‚                                 â”‚
   â”‚                                 â””â”€ Listener: on('messageSeen')
   â”‚                                    - Update: msg.status = "seen"
   â”‚                                    - Status: âœ“âœ“ (blue)
   â”‚
   â””â”€ (Message stored in MongoDB)
      - Persists across sessions
      - Available for history lookup
      - Encrypted at rest in Atlas

```

### Receiving a Message

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend sends "receive-message"  â”‚
â”‚ via Socket.IO broadcast          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ socketService Listener           â”‚
â”‚ on('messageReceived', (data) => {â”‚
â”‚   emit('messageReceived', data)  â”‚
â”‚ })                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FacultyChat useEffect Listener   â”‚
â”‚ socketService.on('message       â”‚
â”‚  Received', (data) => {          â”‚
â”‚   - Add to messages state        â”‚
â”‚   - Auto mark as seen if open    â”‚
â”‚ })                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React Re-render                  â”‚
â”‚ - Message appears in chat        â”‚
â”‚ - Scroll to latest message       â”‚
â”‚ - Update unread badge            â”‚
â”‚ - Play notification sound        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            FacultyChat Component State             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  chats: [                                          â”‚
â”‚    {                                               â”‚
â”‚      id: 1,                                        â”‚
â”‚      participantName: "Rahul Kumar",              â”‚
â”‚      participantId: "RAK001",                     â”‚
â”‚      lastMessage: "Thank you...",                 â”‚
â”‚      unreadCount: 2,                              â”‚
â”‚      onlineStatus: true                           â”‚
â”‚    },                                              â”‚
â”‚    ...                                             â”‚
â”‚  ]                                                 â”‚
â”‚                                                    â”‚
â”‚  messages: {                                       â”‚
â”‚    1: [                                            â”‚
â”‚      {                                             â”‚
â”‚        id: 1,                                      â”‚
â”‚        senderId: "faculty@email.com",            â”‚
â”‚        content: "Hi Rahul",                       â”‚
â”‚        status: "seen",                            â”‚
â”‚        timestamp: "2026-01-05 10:15"             â”‚
â”‚      },                                            â”‚
â”‚      ...                                           â”‚
â”‚    ],                                              â”‚
â”‚    2: [...],                                       â”‚
â”‚    3: [...]                                        â”‚
â”‚  }                                                 â”‚
â”‚                                                    â”‚
â”‚  selectedChat: null || {id, type, ...}           â”‚
â”‚  messageInput: ""                                  â”‚
â”‚  searchQuery: ""                                   â”‚
â”‚  searchResults: []                                 â”‚
â”‚  isTyping: false                                   â”‚
â”‚  socketConnected: true                            â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
  Socket Events  User Actions  API Responses
  â€¢ message      â€¢ sendMsg     â€¢ searchUsers
  â€¢ typing       â€¢ search      â€¢ chatList
  â€¢ seen         â€¢ delete      â€¢ messages
  â€¢ online       â€¢ open chat   â€¢ upload
  â€¢ offline      â€¢ close       â€¢ getChatList
```

---

## ğŸ” Authentication & Authorization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Faculty   â”‚
â”‚   Login     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ JWT Token  â”‚
    â”‚ Generated  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Socket.IO Connection            â”‚
    â”‚ - Query: ?userId=faculty@email  â”‚
    â”‚ - Header: X-User-Id             â”‚
    â”‚ - Verify JWT                    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ Valid âœ“ â†’ Connect & add to connectedUsers
         â”‚
         â””â”€ Invalid âœ— â†’ Disconnect
```

---

## ğŸ”„ Real-Time Sync Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Synchronization Events                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Event                  Sync Point    Latency       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Send message    â†’    Socket.emit        Instant   â”‚
â”‚  Message saved   â†’    onSendMessage()    <50ms     â”‚
â”‚  Deliver status  â†’    message-delivered <300ms    â”‚
â”‚  Receive message â†’    receive-message   <100ms    â”‚
â”‚  Message seen    â†’    message-seen       <800ms    â”‚
â”‚  Typing          â†’    typing event       <50ms     â”‚
â”‚  Stop typing     â†’    stop-typing        <50ms     â”‚
â”‚  Online status   â†’    user-status        <200ms    â”‚
â”‚  Delete message  â†’    message-deleted    <150ms    â”‚
â”‚  File upload     â†’    uploadFile API     <2s       â”‚
â”‚  Search          â†’    searchUsers API    <500ms    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Collections & Relationships                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  students                                            â”‚
â”‚  â”œâ”€ _id (ObjectId)                                  â”‚
â”‚  â”œâ”€ email (String, unique)                          â”‚
â”‚  â”œâ”€ name (String)                                   â”‚
â”‚  â””â”€ role (String)                                   â”‚
â”‚       â”‚                                              â”‚
â”‚       â”‚ â†“ Used in                                    â”‚
â”‚       â””â”€â†’ Conversation.participantIds               â”‚
â”‚       â””â”€â†’ Message.senderId                          â”‚
â”‚       â””â”€â†’ ChatGroup.memberIds                       â”‚
â”‚                                                      â”‚
â”‚  conversations                                       â”‚
â”‚  â”œâ”€ _id (ObjectId)                                  â”‚
â”‚  â”œâ”€ participantIds (Array)                          â”‚
â”‚  â”‚  â”œâ”€ participantIds[0] â†’ students._id             â”‚
â”‚  â”‚  â””â”€ participantIds[1] â†’ students._id             â”‚
â”‚  â”œâ”€ lastMessageId (String)                          â”‚
â”‚  â”‚  â””â”€â†’ messages._id                                â”‚
â”‚  â””â”€ lastMessageTime (DateTime)                      â”‚
â”‚       â”‚                                              â”‚
â”‚       â”‚ â†“ Has many                                   â”‚
â”‚       â””â”€â†’ messages.conversationId                   â”‚
â”‚                                                      â”‚
â”‚  messages                                            â”‚
â”‚  â”œâ”€ _id (ObjectId)                                  â”‚
â”‚  â”œâ”€ conversationId (String)                         â”‚
â”‚  â”‚  â””â”€â†’ conversations._id                           â”‚
â”‚  â”œâ”€ senderId (String)                               â”‚
â”‚  â”‚  â””â”€â†’ students._id                                â”‚
â”‚  â”œâ”€ content (String)                                â”‚
â”‚  â”œâ”€ type (String)                                   â”‚
â”‚  â”œâ”€ read (Boolean)                                  â”‚
â”‚  â””â”€ timestamp (DateTime)                            â”‚
â”‚                                                      â”‚
â”‚  chatGroups                                          â”‚
â”‚  â”œâ”€ _id (ObjectId)                                  â”‚
â”‚  â”œâ”€ groupName (String)                              â”‚
â”‚  â”œâ”€ memberIds (Array)                               â”‚
â”‚  â”‚  â””â”€â†’ students._id (multiple)                     â”‚
â”‚  â”œâ”€ creatorId (String)                              â”‚
â”‚  â”‚  â””â”€â†’ students._id (faculty member)               â”‚
â”‚  â””â”€ createdAt (DateTime)                            â”‚
â”‚       â”‚                                              â”‚
â”‚       â”‚ â†“ Has many                                   â”‚
â”‚       â””â”€â†’ messages.groupId                          â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Metrics & Monitoring

```
Performance Monitoring Points
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Socket Connection
   â””â”€ socketService.isSocketConnected()
   â””â”€ socketService.getSocketId()

2. Message Delivery
   â””â”€ Time from send to "message-delivered" event
   â””â”€ Time from receive to "message-seen" event

3. Search Performance
   â””â”€ Time from query to search results
   â””â”€ Number of results returned

4. Chat Load
   â””â”€ Number of chats loaded
   â””â”€ Number of messages per chat
   â””â”€ Total memory usage

5. Network Health
   â””â”€ WebSocket ping/pong interval
   â””â”€ Fallback to HTTP polling (if needed)
   â””â”€ Reconnection attempts

6. Database Performance
   â””â”€ Message query time
   â””â”€ Conversation update time
   â””â”€ Index usage on conversationId
```

---

This diagram provides a complete visual understanding of how the Faculty Chat Module architecture works, how data flows through the system, and how all components interact in real-time.
